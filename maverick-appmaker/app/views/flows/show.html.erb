<div style="padding: 0 16px;">
<p style="color: green"><%= notice %></p>

<%= render @flow %>

<div>
  <%= link_to "Edit this flow", edit_app_flow_path(@app, @flow) %> |
  <%= link_to "Back to flows", app_flows_path(@app) %>

  <%= button_to "Destroy this flow", [@app, @flow], method: :delete %>

  <%= button_to "Launch App", show_app_app_flow_url(@app, @flow), method: :get %>
</div>

<h4>Panels</h4  >
<div class="row">
<% @flow.panels.each do |panel| %>
  <div class="col s12 z-depth-2" style="margin-bottom: 24px;">
  <%= form_with(url: update_sql_app_flow_panel_path(@app, @flow, panel), method: "put") do |f| %>
    <p>
        <strong>Title:</strong> 
        <%= panel.title %>
    </p>
    <p>
        <strong>Panel Type:</strong> 
        <%= panel.panel_type %>
    </p>
    <p>
        <strong>Natural Prompt:</strong> <br/>
        <%= text_area_tag :natural_prompt, panel.natural_prompt, rows: 1, cols: 50, class: 'prompt'%>
    </p>  
    <p>
        <strong>SQL Query:</strong> <br/>
        <%= text_area_tag :sql_query, panel.sql_query, rows: 5, cols: 50, class: 'sql' %>
    </p>
    <p>
    <%= f.submit "Update SQL/Prompt" %>
    </p>
  <% end %>
  <p>
  <%= button_to "Generate Text2SQL", app_flow_panel_path(@app, @flow, panel), method: :put %>
  </p>
  </div>
  <% end %>
</div>


<h4>Add Panel:</h4>
<div class="row" style="width: 50%; margin: 0;">
<%= form_with model: [@app, @flow, @flow.panels.build] do |f| %>
    <p class="col s12">
        <%= f.label :title %><br>
        <%= f.text_field :title %>
    </p>
    <p class="col s12">
        <%= f.label :panel_type %><br>
        <%= f.text_field :panel_type %>
    </p>
    <p class="col s12">
      <%= f.label :natural_prompt %><br>
      <%= f.text_area :natural_prompt, rows: 2, cols: 80 %>
    </p>
    <p class="col s12">
        <%= f.submit %>
    </p>
<% end %>
</div>
</div>